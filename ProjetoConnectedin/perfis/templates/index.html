{% extends 'base.html' %}
{% block body %}

<div class="col-lg-12"> 		
	<div class="panel panel-default">
		<div class="panel-heading">
			<strong>Todos os perfis</strong>
		</div>
		{% if perfis %}
		<ul class="list-group">
            {% for perfil in perfis %}
                {% if perfil.id != perfil_logado.id %}
                    <li class="list-group-item">
                        <a href = "{% url 'exibir' perfil.id %}">	{{ perfil.nome }} / {{ perfil.email }}
                        </a>	
                    </li>
                {% endif %}

			{% endfor %}
		{% else %}	
			<p>Não há perfis cadastrados</p>
		</ul>
		{% endif %}
	</div>
	
	<div class="panel panel-default">    
		{% if perfil_logado.minha_timeline.get_timeline %}
			<div class="panel-heading">
				<strong> 
					Todas as postagens
				</strong>
			</div>
			<ul class="list-group">
				{% for postagem in perfil_logado.minha_timeline.get_timeline %}
					<li class = "list-group-item">
						<div class="row">
							<div class = "col-lg-1">
								<img src="/static/img/photo.jpg" alt="Perfil Icon" style="border-radius: 10px; width:40px; height:40px;">
							</div>
							<div class = "col-lg-10">
									<h4><strong>{{postagem.responsavel}}</strong></h4>
							</div>
							
							
						</div>
						
						<br>
						{{ postagem }}
						<hr>
						<p>{{ postagem.dt_publicacao }}
							{% if postagem.responsavel.id == perfil_logado.id %}
							<button class="btn btn-default pull-right btn-confirm" >Excluir</button>

										<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" id="mi-modal">
											<div class="modal-dialog modal-sm">
												<div class="modal-content">
													<div class="modal-header">
														<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
														<h4 class="modal-title" id="myModalLabel">Deseja realmente excluir?</h4>
													</div>
													<div class="modal-footer">
														<a href = "{% url 'excluir_post' postagem.id %}" class="btn btn-success" id="modal-btn-si">Sim</a>
														<a href = "{% url 'index' %}" class="btn btn-danger" id="modal-btn-no">Não</a>
													</div>
												</div>
											</div>
										</div>
							{% endif %}
						</p>														
					</li>
				{% endfor %}
			</ul>
		{% else %}
			<div class="panel-body">
				Não há postagens
			</div>    
		{% endif %}

	</div>

</div>

<script type="text/javascript">
	
var modalConfirm = function(callback){
  
  $(".btn-confirm").on("click", function(){
    $("#mi-modal").modal('show');
  });

  $("#modal-btn-si").on("click", function(){
    callback(true);
    $("#mi-modal").modal('hide');
  });
  
  $("#modal-btn-no").on("click", function(){
    callback(false);
    $("#mi-modal").modal('hide');
  });
};

modalConfirm(function(confirm){
  if(confirm){
    //Acciones si el usuario confirma
    $("#result").html("CONFIRMADO");
  }else{
    //Acciones si el usuario no confirma
    $("#result").html("NO CONFIRMADO");
  }
});	
</script>



{% endblock %}